{"ast":null,"code":"var _jsxFileName = \"C:\\\\laragon\\\\www\\\\E-RAPORT-NUURUSH-SHOLAAH\\\\e-raport-client\\\\src\\\\dashboard\\\\manajemen-raport\\\\page.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport DashboardLayout from '../../dashboard/layout';\nimport axios from 'axios';\nimport raportService from '../../services/raportService';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../../components/ui/card';\nimport { Button } from '../../components/ui/button';\nimport { useToast } from '../../components/ui/toast';\nimport tahunAjaranService from '../../services/tahunAjaranService';\nimport { Label } from '../../components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../components/ui/select';\nimport { DropdownMenu, DropdownMenuTrigger, DropdownMenuContent, DropdownMenuItem, DropdownMenuSub, DropdownMenuSubTrigger, DropdownMenuSubContent, DropdownMenuSeparator, DropdownMenuPortal } from '../../components/ui/dropdown-menu';\nimport { ChevronDown } from 'lucide-react';\nimport { getAllTingkatans } from '../../services/tingkatanService';\nimport DataTable from '../../components/data-table';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://localhost:5000/api';\n\n// Tipe data\n\nexport default function ManajemenRaportDashboardPage() {\n  _s();\n  // State\n  const [batchData, setBatchData] = useState([]);\n  const [loadingBatch, setLoadingBatch] = useState(true);\n  const [siswaList, setSiswaList] = useState([]);\n  const [loadingSiswa, setLoadingSiswa] = useState(true);\n  const [masterOptions, setMasterOptions] = useState([]);\n  const [periodeOptions, setPeriodeOptions] = useState([]);\n  const [tingkatanOptions, setTingkatanOptions] = useState([]);\n  const [kelasOptions, setKelasOptions] = useState([]);\n  const [selectedMaster, setSelectedMaster] = useState('_all');\n  const [selectedPeriode, setSelectedPeriode] = useState('_all');\n  const [selectedTingkatan, setSelectedTingkatan] = useState('_all');\n  const [selectedKelas, setSelectedKelas] = useState('_all');\n  const columns = [{\n    header: 'NIS',\n    accessorKey: 'nis'\n  }, {\n    header: 'Nama',\n    accessorKey: 'nama'\n  }, {\n    header: 'Kelas',\n    accessorKey: 'currentHistory.kelas.nama_kelas'\n  }, {\n    id: 'actions',\n    header: 'Aksi',\n    cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(DropdownMenu, {\n      children: [/*#__PURE__*/_jsxDEV(DropdownMenuTrigger, {\n        asChild: true,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          size: \"sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"Open menu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DropdownMenuContent, {\n        align: \"end\",\n        children: [/*#__PURE__*/_jsxDEV(DropdownMenuSub, {\n          children: [/*#__PURE__*/_jsxDEV(DropdownMenuSubTrigger, {\n            children: \"Generate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DropdownMenuPortal, {\n            children: /*#__PURE__*/_jsxDEV(DropdownMenuSubContent, {\n              children: [/*#__PURE__*/_jsxDEV(DropdownMenuItem, {\n                onClick: () => handleGenerate('identitas', row.original.id),\n                children: \"Generate Identitas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(DropdownMenuItem, {\n                onClick: () => handleGenerate('nilai', row.original.id),\n                children: \"Generate Nilai\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(DropdownMenuItem, {\n                onClick: () => handleGenerate('sikap', row.original.id),\n                children: \"Generate Sikap\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DropdownMenuSeparator, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DropdownMenuItem, {\n          onClick: () => handleViewDetail(row.original),\n          children: \"Lihat Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)\n  }];\n  const [editingNotes, setEditingNotes] = useState({});\n  const [deleting, setDeleting] = useState(null);\n  const {\n    toast\n  } = useToast();\n\n  // Fungsi fetchBatchData - Remove toast from dependencies\n  const fetchBatchData = useCallback(async () => {\n    setLoadingBatch(true);\n    try {\n      const res = await raportService.getRaportList();\n      setBatchData(res);\n    } catch (e) {\n      console.error(e);\n      toast({\n        title: 'Gagal Memuat Batch',\n        description: 'Terjadi kesalahan.',\n        variant: 'destructive'\n      });\n    } finally {\n      setLoadingBatch(false);\n    }\n  }, []); // Remove toast dependency\n\n  // Fungsi loadSiswa - Remove toast from dependencies and add proper conditions\n  const loadSiswa = useCallback(async () => {\n    if (!selectedPeriode || !selectedKelas) {\n      setSiswaList([]);\n      setLoadingSiswa(false); // Set loading to false when no selection\n      return;\n    }\n    setLoadingSiswa(true);\n    try {\n      const params = {\n        tahun_ajaran_id: selectedPeriode,\n        kelas_id: selectedKelas\n      };\n      const res = await axios.get(`${API_BASE}/siswa`, {\n        params\n      });\n      setSiswaList(res.data || []);\n      if ((res.data || []).length === 0) {\n        toast({\n          title: 'Informasi',\n          description: 'Tidak ada siswa yang ditemukan.'\n        });\n      }\n    } catch (e) {\n      console.error(e);\n      toast({\n        title: 'Gagal Memuat Siswa',\n        description: 'Gagal mengambil data siswa.',\n        variant: 'destructive'\n      });\n      setSiswaList([]);\n    } finally {\n      setLoadingSiswa(false);\n    }\n  }, [selectedPeriode, selectedKelas]); // Remove toast dependency\n\n  // Fixed initialization useEffect - only run once\n  useEffect(() => {\n    const initialize = async () => {\n      try {\n        setLoadingSiswa(true);\n        const masters = await tahunAjaranService.getAllMasterTahunAjaran();\n        const tingkatans = await getAllTingkatans();\n        setMasterOptions(masters);\n        setTingkatanOptions(tingkatans);\n        if (masters.length > 0) {\n          const defaultMasterId = masters[0].id;\n          setSelectedMaster(defaultMasterId);\n          const periodes = await tahunAjaranService.getPeriodesForMaster(defaultMasterId);\n          setPeriodeOptions(periodes);\n          if (periodes.length > 0) {\n            setSelectedPeriode(periodes[0].id);\n          }\n        }\n        if (tingkatans.length > 0) {\n          const defaultTingkatanId = tingkatans[0].id;\n          setSelectedTingkatan(defaultTingkatanId);\n          const kelasResp = await axios.get(`${API_BASE}/kelas`, {\n            params: {\n              tingkatan_id: defaultTingkatanId\n            }\n          });\n          setKelasOptions(kelasResp.data || []);\n          if (kelasResp.data && kelasResp.data.length > 0) {\n            setSelectedKelas(kelasResp.data[0].id);\n          }\n        }\n      } catch (error) {\n        console.error(\"Initialization failed:\", error);\n        toast({\n          title: 'Inisialisasi Gagal',\n          description: 'Gagal memuat data filter awal.',\n          variant: 'destructive'\n        });\n      } finally {\n        setLoadingSiswa(false);\n      }\n    };\n    initialize();\n    fetchBatchData();\n  }, []); // Empty dependency array - only runs once\n\n  // Handle master selection changes\n  useEffect(() => {\n    if (selectedMaster === '_all') {\n      setPeriodeOptions([]);\n      setSelectedPeriode('_all');\n      return;\n    }\n    const fetchPeriodes = async () => {\n      try {\n        const periodes = await tahunAjaranService.getPeriodesForMaster(selectedMaster);\n        setPeriodeOptions(periodes);\n        setSelectedPeriode(periodes.length > 0 ? periodes[0].id : '_all');\n      } catch (error) {\n        console.error('Failed to fetch periodes:', error);\n        setPeriodeOptions([]);\n        setSelectedPeriode('_all');\n      }\n    };\n    fetchPeriodes();\n  }, [selectedMaster]);\n\n  // Handle tingkatan selection changes\n  useEffect(() => {\n    if (selectedTingkatan === '_all') {\n      setKelasOptions([]);\n      setSelectedKelas('_all');\n      return;\n    }\n    const fetchKelas = async () => {\n      try {\n        const resp = await axios.get(`${API_BASE}/kelas`, {\n          params: {\n            tingkatan_id: selectedTingkatan\n          }\n        });\n        setKelasOptions(resp.data || []);\n        setSelectedKelas(resp.data && resp.data.length > 0 ? resp.data[0].id : '_all');\n      } catch (err) {\n        console.error('Failed fetching kelas for tingkatan', err);\n        setKelasOptions([]);\n        setSelectedKelas('_all');\n      }\n    };\n    fetchKelas();\n  }, [selectedTingkatan]);\n\n  // Removed auto-fetching useEffect - data will be loaded only when \"Muat Siswa\" is clicked\n\n  // Helper functions\n  const handleViewDetail = siswa => {\n    // TODO: Implement view detail modal\n    console.log('View detail for:', siswa);\n    toast({\n      title: 'Info',\n      description: 'Fitur lihat detail akan segera hadir.'\n    });\n  };\n  const downloadBlob = (resp, defaultName) => {\n    const blob = new Blob([resp.data], {\n      type: resp.headers['content-type']\n    });\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    let fileName = defaultName;\n    const cd = resp.headers['content-disposition'];\n    if (cd) {\n      const m = cd.match(/filename=\"(.+)\"/);\n      if (m) fileName = m[1];\n    }\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n    window.URL.revokeObjectURL(link.href);\n  };\n  const handleGenerate = async (type, siswaId) => {\n    if ((type === 'nilai' || type === 'sikap') && !selectedPeriode) {\n      return toast({\n        title: 'Pilih Periode',\n        description: 'Pilih tahun ajaran dan semester dulu',\n        variant: 'destructive'\n      });\n    }\n    try {\n      var _periodeOptions$find;\n      let resp;\n      const semester = (_periodeOptions$find = periodeOptions.find(p => p.id === selectedPeriode)) === null || _periodeOptions$find === void 0 ? void 0 : _periodeOptions$find.semester;\n      if (type === 'identitas') resp = await raportService.generateIdentitas(siswaId);\n      if (type === 'nilai') resp = await raportService.generateNilai(siswaId, selectedPeriode, semester);\n      if (type === 'sikap') resp = await raportService.generateSikap(siswaId, selectedPeriode, semester);\n      if (resp) {\n        downloadBlob(resp, `Laporan_${type}_${siswaId}.docx`);\n        toast({\n          title: 'Sukses',\n          description: 'File laporan berhasil diunduh.'\n        });\n      }\n    } catch (e) {\n      var _e$response, _e$response$data;\n      console.error(e);\n      toast({\n        title: 'Gagal Generate',\n        description: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Gagal membuat file laporan.',\n        variant: 'destructive'\n      });\n    }\n  };\n  const handleSaveNotes = async siswa => {\n    var _siswa$currentHistory;\n    const notes = editingNotes[siswa.id];\n    if (!notes || !notes.catatan_akademik && !notes.catatan_sikap) return;\n    const histId = (_siswa$currentHistory = siswa.currentHistory) === null || _siswa$currentHistory === void 0 ? void 0 : _siswa$currentHistory.id;\n    if (!histId) {\n      return toast({\n        title: 'History Tidak Ditemukan',\n        description: 'Tidak ada riwayat kelas untuk siswa ini.',\n        variant: 'destructive'\n      });\n    }\n    try {\n      await axios.put(`${API_BASE}/history/${histId}/catatan`, notes);\n      toast({\n        title: 'Berhasil',\n        description: 'Catatan berhasil disimpan.'\n      });\n      // Clear editing notes after successful save\n      setEditingNotes(prev => {\n        const newNotes = {\n          ...prev\n        };\n        delete newNotes[siswa.id];\n        return newNotes;\n      });\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      console.error(e);\n      toast({\n        title: 'Gagal Menyimpan',\n        description: (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Gagal menyimpan catatan.',\n        variant: 'destructive'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold\",\n          children: \"Manajemen Raport\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted-foreground\",\n          children: \"Pilih filter untuk menampilkan siswa, lalu kelola raport dan catatan per individu.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Filter Siswa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: \"Ubah pilihan di bawah ini untuk memuat daftar siswa secara otomatis.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"master-ajaran\",\n                children: \"Tahun Ajaran\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedMaster),\n                onValueChange: value => setSelectedMaster(value === '_all' ? '_all' : Number(value)),\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Tahun Ajaran\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: \"_all\",\n                    children: \"Tampilkan Semua\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 21\n                  }, this), masterOptions.map(m => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(m.id),\n                    children: m.nama_ajaran\n                  }, m.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"periode\",\n                children: \"Semester / Periode\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedPeriode),\n                onValueChange: value => setSelectedPeriode(value === '_all' ? '_all' : Number(value)),\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Semester\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: \"_all\",\n                    children: \"Tampilkan Semua\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 21\n                  }, this), periodeOptions.map(p => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(p.id),\n                    children: `Semester ${p.semester}`\n                  }, p.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"tingkatan\",\n                children: \"Tingkatan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedTingkatan),\n                onValueChange: value => setSelectedTingkatan(value === '_all' ? '_all' : Number(value)),\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Tingkatan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 381,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: \"_all\",\n                    children: \"Tampilkan Semua\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 21\n                  }, this), tingkatanOptions.map(t => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(t.id),\n                    children: t.nama_tingkatan\n                  }, t.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"kelas\",\n                children: \"Kelas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedKelas),\n                onValueChange: value => setSelectedKelas(value === '_all' ? '_all' : Number(value)),\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Kelas\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: \"_all\",\n                    children: \"Tampilkan Semua\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 21\n                  }, this), kelasOptions.map(k => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(k.id),\n                    children: k.nama_kelas\n                  }, k.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 405,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Daftar Siswa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: [\"Ditemukan \", siswaList.length, \" siswa. Generate laporan atau perbarui catatan di bawah.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mb-4\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: loadSiswa,\n              disabled: loadingSiswa,\n              children: loadingSiswa ? \"Memuat...\" : \"Muat Siswa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), loadingSiswa ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-muted-foreground\",\n            children: \"Memuat data siswa...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this) : siswaList.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-muted-foreground\",\n            children: \"Belum ada siswa yang dimuat. Klik \\\"Muat Siswa\\\" untuk menampilkan data.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(DataTable, {\n            columns: columns,\n            data: siswaList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 322,\n    columnNumber: 5\n  }, this);\n}\n_s(ManajemenRaportDashboardPage, \"hbiIezwu+Uoy0StpH9FdkR6zdWA=\", false, function () {\n  return [useToast];\n});\n_c = ManajemenRaportDashboardPage;\nvar _c;\n$RefreshReg$(_c, \"ManajemenRaportDashboardPage\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","DashboardLayout","axios","raportService","Card","CardContent","CardHeader","CardTitle","CardDescription","Button","useToast","tahunAjaranService","Label","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","DropdownMenu","DropdownMenuTrigger","DropdownMenuContent","DropdownMenuItem","DropdownMenuSub","DropdownMenuSubTrigger","DropdownMenuSubContent","DropdownMenuSeparator","DropdownMenuPortal","ChevronDown","getAllTingkatans","DataTable","jsxDEV","_jsxDEV","API_BASE","ManajemenRaportDashboardPage","_s","batchData","setBatchData","loadingBatch","setLoadingBatch","siswaList","setSiswaList","loadingSiswa","setLoadingSiswa","masterOptions","setMasterOptions","periodeOptions","setPeriodeOptions","tingkatanOptions","setTingkatanOptions","kelasOptions","setKelasOptions","selectedMaster","setSelectedMaster","selectedPeriode","setSelectedPeriode","selectedTingkatan","setSelectedTingkatan","selectedKelas","setSelectedKelas","columns","header","accessorKey","id","cell","row","children","asChild","variant","size","className","fileName","_jsxFileName","lineNumber","columnNumber","align","onClick","handleGenerate","original","handleViewDetail","editingNotes","setEditingNotes","deleting","setDeleting","toast","fetchBatchData","res","getRaportList","e","console","error","title","description","loadSiswa","params","tahun_ajaran_id","kelas_id","get","data","length","initialize","masters","getAllMasterTahunAjaran","tingkatans","defaultMasterId","periodes","getPeriodesForMaster","defaultTingkatanId","kelasResp","tingkatan_id","fetchPeriodes","fetchKelas","resp","err","siswa","log","downloadBlob","defaultName","blob","Blob","type","headers","link","document","createElement","href","window","URL","createObjectURL","cd","m","match","download","body","appendChild","click","remove","revokeObjectURL","siswaId","_periodeOptions$find","semester","find","p","generateIdentitas","generateNilai","generateSikap","_e$response","_e$response$data","response","message","handleSaveNotes","_siswa$currentHistory","notes","catatan_akademik","catatan_sikap","histId","currentHistory","put","prev","newNotes","_e$response2","_e$response2$data","htmlFor","value","String","onValueChange","Number","placeholder","map","nama_ajaran","t","nama_tingkatan","k","nama_kelas","disabled","_c","$RefreshReg$"],"sources":["C:/laragon/www/E-RAPORT-NUURUSH-SHOLAAH/e-raport-client/src/dashboard/manajemen-raport/page.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport type { ColumnDef } from '@tanstack/react-table';\r\nimport DashboardLayout from '../../dashboard/layout';\r\nimport axios from 'axios';\r\nimport raportService from '../../services/raportService';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../../components/ui/card';\r\nimport { Button } from '../../components/ui/button';\r\nimport { useToast } from '../../components/ui/toast';\r\nimport tahunAjaranService from '../../services/tahunAjaranService';\r\nimport { Label } from '../../components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../components/ui/select';\r\nimport { \r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuPortal,\r\n} from '../../components/ui/dropdown-menu';\r\nimport { ChevronDown } from 'lucide-react';\r\nimport { getAllTingkatans } from '../../services/tingkatanService';\r\nimport DataTable from '../../components/data-table';\r\nconst API_BASE = 'http://localhost:5000/api';\r\n\r\n// Tipe data\r\ntype SiswaRow = {\r\n  id: number;\r\n  nis: string;\r\n  nama: string;\r\n  currentHistory?: {\r\n    id: number;\r\n    kelas_id: number;\r\n    catatan_akademik?: string;\r\n    catatan_sikap?: string;\r\n  };\r\n};\r\n\r\ntype BatchRow = { id: number; nama: string; keterangan?: string };\r\n\r\ntype MasterTahunAjaran = {\r\n  id: number;\r\n  nama_ajaran: string;\r\n};\r\n\r\ntype Periode = {\r\n  id: number;\r\n  semester: number;\r\n  nama_periode?: string;\r\n};\r\n\r\ntype Tingkatan = {\r\n  id: number;\r\n  nama_tingkatan: string;\r\n};\r\n\r\ntype Kelas = {\r\n  id: number;\r\n  nama_kelas: string;\r\n  tingkatan_id: number;\r\n};\r\n\r\nexport default function ManajemenRaportDashboardPage() {\r\n  // State\r\n  const [batchData, setBatchData] = useState<BatchRow[]>([]);\r\n  const [loadingBatch, setLoadingBatch] = useState(true);\r\n  const [siswaList, setSiswaList] = useState<SiswaRow[]>([]);\r\n  const [loadingSiswa, setLoadingSiswa] = useState(true);\r\n  const [masterOptions, setMasterOptions] = useState<MasterTahunAjaran[]>([]);\r\n  const [periodeOptions, setPeriodeOptions] = useState<Periode[]>([]);\r\n  const [tingkatanOptions, setTingkatanOptions] = useState<Tingkatan[]>([]);\r\n  const [kelasOptions, setKelasOptions] = useState<Kelas[]>([]);\r\n  const [selectedMaster, setSelectedMaster] = useState<number | '_all'>('_all');\r\n  const [selectedPeriode, setSelectedPeriode] = useState<number | '_all'>('_all');\r\n  const [selectedTingkatan, setSelectedTingkatan] = useState<number | '_all'>('_all');\r\n  const [selectedKelas, setSelectedKelas] = useState<number | '_all'>('_all');\r\n\r\n  const columns: ColumnDef<SiswaRow, any>[] = [\r\n    { header: 'NIS', accessorKey: 'nis' },\r\n    { header: 'Nama', accessorKey: 'nama' },\r\n    { header: 'Kelas', accessorKey: 'currentHistory.kelas.nama_kelas' },\r\n    {\r\n      id: 'actions',\r\n      header: 'Aksi',\r\n      cell: ({ row }) => (\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button variant=\"outline\" size=\"sm\">\r\n              <span className=\"sr-only\">Open menu</span>\r\n              <ChevronDown className=\"h-4 w-4\" />\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"end\">\r\n            <DropdownMenuSub>\r\n              <DropdownMenuSubTrigger>Generate</DropdownMenuSubTrigger>\r\n              <DropdownMenuPortal>\r\n                <DropdownMenuSubContent>\r\n                  <DropdownMenuItem onClick={() => handleGenerate('identitas', row.original.id)}>\r\n                    Generate Identitas\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem onClick={() => handleGenerate('nilai', row.original.id)}>\r\n                    Generate Nilai\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuItem onClick={() => handleGenerate('sikap', row.original.id)}>\r\n                    Generate Sikap\r\n                  </DropdownMenuItem>\r\n                </DropdownMenuSubContent>\r\n              </DropdownMenuPortal>\r\n            </DropdownMenuSub>\r\n            <DropdownMenuSeparator />\r\n            <DropdownMenuItem onClick={() => handleViewDetail(row.original)}>\r\n              Lihat Data\r\n            </DropdownMenuItem>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n      )\r\n    }\r\n  ];\r\n  const [editingNotes, setEditingNotes] = useState<Record<number, { catatan_akademik?: string; catatan_sikap?: string }>>({});\r\n  const [deleting, setDeleting] = useState<BatchRow | null>(null);\r\n  const { toast } = useToast();\r\n\r\n  // Fungsi fetchBatchData - Remove toast from dependencies\r\n  const fetchBatchData = useCallback(async () => {\r\n    setLoadingBatch(true);\r\n    try {\r\n      const res = await raportService.getRaportList();\r\n      setBatchData(res);\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Memuat Batch', description: 'Terjadi kesalahan.', variant: 'destructive' });\r\n    } finally {\r\n      setLoadingBatch(false);\r\n    }\r\n  }, []); // Remove toast dependency\r\n\r\n  // Fungsi loadSiswa - Remove toast from dependencies and add proper conditions\r\n  const loadSiswa = useCallback(async () => {\r\n    if (!selectedPeriode || !selectedKelas) {\r\n      setSiswaList([]);\r\n      setLoadingSiswa(false); // Set loading to false when no selection\r\n      return;\r\n    }\r\n    \r\n    setLoadingSiswa(true);\r\n    try {\r\n      const params = { tahun_ajaran_id: selectedPeriode, kelas_id: selectedKelas };\r\n      const res = await axios.get<SiswaRow[]>(`${API_BASE}/siswa`, { params });\r\n      setSiswaList(res.data || []);\r\n      if ((res.data || []).length === 0) {\r\n        toast({ title: 'Informasi', description: 'Tidak ada siswa yang ditemukan.' });\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Memuat Siswa', description: 'Gagal mengambil data siswa.', variant: 'destructive' });\r\n      setSiswaList([]);\r\n    } finally {\r\n      setLoadingSiswa(false);\r\n    }\r\n  }, [selectedPeriode, selectedKelas]); // Remove toast dependency\r\n\r\n  // Fixed initialization useEffect - only run once\r\n  useEffect(() => {\r\n    const initialize = async () => {\r\n      try {\r\n        setLoadingSiswa(true);\r\n        const masters = await tahunAjaranService.getAllMasterTahunAjaran();\r\n        const tingkatans = await getAllTingkatans();\r\n        setMasterOptions(masters);\r\n        setTingkatanOptions(tingkatans);\r\n        \r\n        if (masters.length > 0) {\r\n          const defaultMasterId = masters[0].id;\r\n          setSelectedMaster(defaultMasterId);\r\n          const periodes = await tahunAjaranService.getPeriodesForMaster(defaultMasterId);\r\n          setPeriodeOptions(periodes);\r\n          if (periodes.length > 0) {\r\n            setSelectedPeriode(periodes[0].id);\r\n          }\r\n        }\r\n        if (tingkatans.length > 0) {\r\n          const defaultTingkatanId = tingkatans[0].id;\r\n          setSelectedTingkatan(defaultTingkatanId);\r\n          const kelasResp = await axios.get(`${API_BASE}/kelas`, { params: { tingkatan_id: defaultTingkatanId } });\r\n          setKelasOptions(kelasResp.data || []);\r\n          if (kelasResp.data && kelasResp.data.length > 0) {\r\n            setSelectedKelas(kelasResp.data[0].id);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Initialization failed:\", error);\r\n        toast({ title: 'Inisialisasi Gagal', description: 'Gagal memuat data filter awal.', variant: 'destructive' });\r\n      } finally {\r\n        setLoadingSiswa(false);\r\n      }\r\n    };\r\n    \r\n    initialize();\r\n    fetchBatchData();\r\n  }, []); // Empty dependency array - only runs once\r\n\r\n  // Handle master selection changes\r\n  useEffect(() => {\r\n    if (selectedMaster === '_all') {\r\n      setPeriodeOptions([]);\r\n      setSelectedPeriode('_all');\r\n      return;\r\n    }\r\n    \r\n    const fetchPeriodes = async () => {\r\n      try {\r\n        const periodes = await tahunAjaranService.getPeriodesForMaster(selectedMaster);\r\n        setPeriodeOptions(periodes);\r\n        setSelectedPeriode(periodes.length > 0 ? periodes[0].id : '_all');\r\n      } catch (error) {\r\n        console.error('Failed to fetch periodes:', error);\r\n        setPeriodeOptions([]);\r\n        setSelectedPeriode('_all');\r\n      }\r\n    };\r\n    \r\n    fetchPeriodes();\r\n  }, [selectedMaster]);\r\n\r\n  // Handle tingkatan selection changes\r\n  useEffect(() => {\r\n    if (selectedTingkatan === '_all') {\r\n      setKelasOptions([]);\r\n      setSelectedKelas('_all');\r\n      return;\r\n    }\r\n    \r\n    const fetchKelas = async () => {\r\n      try {\r\n        const resp = await axios.get(`${API_BASE}/kelas`, { params: { tingkatan_id: selectedTingkatan } });\r\n        setKelasOptions(resp.data || []);\r\n        setSelectedKelas(resp.data && resp.data.length > 0 ? resp.data[0].id : '_all');\r\n      } catch (err) {\r\n        console.error('Failed fetching kelas for tingkatan', err);\r\n        setKelasOptions([]);\r\n        setSelectedKelas('_all');\r\n      }\r\n    };\r\n    \r\n    fetchKelas();\r\n  }, [selectedTingkatan]);\r\n\r\n  // Removed auto-fetching useEffect - data will be loaded only when \"Muat Siswa\" is clicked\r\n\r\n  // Helper functions\r\n  const handleViewDetail = (siswa: SiswaRow) => {\r\n    // TODO: Implement view detail modal\r\n    console.log('View detail for:', siswa);\r\n    toast({ title: 'Info', description: 'Fitur lihat detail akan segera hadir.' });\r\n  };\r\n\r\n  const downloadBlob = (resp: any, defaultName: string) => {\r\n    const blob = new Blob([resp.data], { type: resp.headers['content-type'] });\r\n    const link = document.createElement('a');\r\n    link.href = window.URL.createObjectURL(blob);\r\n    let fileName = defaultName;\r\n    const cd = resp.headers['content-disposition'];\r\n    if (cd) {\r\n      const m = cd.match(/filename=\"(.+)\"/);\r\n      if (m) fileName = m[1];\r\n    }\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    link.remove();\r\n    window.URL.revokeObjectURL(link.href);\r\n  };\r\n\r\n  const handleGenerate = async (type: 'identitas' | 'nilai' | 'sikap', siswaId: number) => {\r\n    if ((type === 'nilai' || type === 'sikap') && !selectedPeriode) {\r\n      return toast({ title: 'Pilih Periode', description: 'Pilih tahun ajaran dan semester dulu', variant: 'destructive' });\r\n    }\r\n    try {\r\n      let resp;\r\n      const semester = periodeOptions.find(p => p.id === selectedPeriode)?.semester;\r\n      if (type === 'identitas') resp = await raportService.generateIdentitas(siswaId);\r\n      if (type === 'nilai') resp = await raportService.generateNilai(siswaId, selectedPeriode, semester);\r\n      if (type === 'sikap') resp = await raportService.generateSikap(siswaId, selectedPeriode, semester);\r\n      \r\n      if (resp) {\r\n        downloadBlob(resp, `Laporan_${type}_${siswaId}.docx`);\r\n        toast({ title: 'Sukses', description: 'File laporan berhasil diunduh.' });\r\n      }\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Generate', description: e?.response?.data?.message || 'Gagal membuat file laporan.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleSaveNotes = async (siswa: SiswaRow) => {\r\n    const notes = editingNotes[siswa.id];\r\n    if (!notes || (!notes.catatan_akademik && !notes.catatan_sikap)) return;\r\n    \r\n    const histId = siswa.currentHistory?.id;\r\n    if (!histId) {\r\n      return toast({ title: 'History Tidak Ditemukan', description: 'Tidak ada riwayat kelas untuk siswa ini.', variant: 'destructive' });\r\n    }\r\n    \r\n    try {\r\n      await axios.put(`${API_BASE}/history/${histId}/catatan`, notes);\r\n      toast({ title: 'Berhasil', description: 'Catatan berhasil disimpan.' });\r\n      // Clear editing notes after successful save\r\n      setEditingNotes(prev => {\r\n        const newNotes = { ...prev };\r\n        delete newNotes[siswa.id];\r\n        return newNotes;\r\n      });\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Menyimpan', description: e?.response?.data?.message || 'Gagal menyimpan catatan.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">Manajemen Raport</h1>\r\n          <p className=\"text-muted-foreground\">Pilih filter untuk menampilkan siswa, lalu kelola raport dan catatan per individu.</p>\r\n        </div>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Filter Siswa</CardTitle>\r\n            <CardDescription>Ubah pilihan di bawah ini untuk memuat daftar siswa secara otomatis.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"master-ajaran\">Tahun Ajaran</Label>\r\n                <Select\r\n                  value={String(selectedMaster)}\r\n                  onValueChange={(value) => setSelectedMaster(value === '_all' ? '_all' : Number(value))}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Tahun Ajaran\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"_all\">Tampilkan Semua</SelectItem>\r\n                    {masterOptions.map(m => (\r\n                      <SelectItem key={m.id} value={String(m.id)}>\r\n                        {m.nama_ajaran}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"periode\">Semester / Periode</Label>\r\n                <Select\r\n                  value={String(selectedPeriode)}\r\n                  onValueChange={(value) => setSelectedPeriode(value === '_all' ? '_all' : Number(value))}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Semester\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"_all\">Tampilkan Semua</SelectItem>\r\n                    {periodeOptions.map(p => (\r\n                      <SelectItem key={p.id} value={String(p.id)}>\r\n                        {`Semester ${p.semester}`}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"tingkatan\">Tingkatan</Label>\r\n                <Select\r\n                  value={String(selectedTingkatan)}\r\n                  onValueChange={(value) => setSelectedTingkatan(value === '_all' ? '_all' : Number(value))}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Tingkatan\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"_all\">Tampilkan Semua</SelectItem>\r\n                    {tingkatanOptions.map(t => (\r\n                      <SelectItem key={t.id} value={String(t.id)}>\r\n                        {t.nama_tingkatan}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"kelas\">Kelas</Label>\r\n                <Select\r\n                  value={String(selectedKelas)}\r\n                  onValueChange={(value) => setSelectedKelas(value === '_all' ? '_all' : Number(value))}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Kelas\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"_all\">Tampilkan Semua</SelectItem>\r\n                    {kelasOptions.map(k => (\r\n                      <SelectItem key={k.id} value={String(k.id)}>\r\n                        {k.nama_kelas}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Daftar Siswa</CardTitle>\r\n            <CardDescription>Ditemukan {siswaList.length} siswa. Generate laporan atau perbarui catatan di bawah.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"flex justify-end mb-4\">\r\n              <Button onClick={loadSiswa} disabled={loadingSiswa}>\r\n                {loadingSiswa ? \"Memuat...\" : \"Muat Siswa\"}\r\n              </Button>\r\n            </div>\r\n            \r\n            {loadingSiswa ? (\r\n              <div className=\"text-center text-muted-foreground\">Memuat data siswa...</div>\r\n            ) : siswaList.length === 0 ? (\r\n              <div className=\"text-center text-muted-foreground\">Belum ada siswa yang dimuat. Klik \"Muat Siswa\" untuk menampilkan data.</div>\r\n            ) : (\r\n              <DataTable\r\n                columns={columns}\r\n                data={siswaList}\r\n              />\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}