{"ast":null,"code":"var _jsxFileName = \"C:\\\\laragon\\\\www\\\\E-RAPORT-NUURUSH-SHOLAAH\\\\e-raport-client\\\\src\\\\dashboard\\\\manajemen-raport\\\\page.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport DashboardLayout from '../../dashboard/layout';\nimport axios from 'axios';\nimport raportService from '../../services/raportService';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../../components/ui/card';\nimport { Button } from '../../components/ui/button';\nimport { useToast } from '../../components/ui/toast';\nimport tahunAjaranService from '../../services/tahunAjaranService';\nimport { Label } from '../../components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../components/ui/select';\nimport API_BASE from '../../api';\nimport DataTable from '../../components/data-table';\n\n// Tipe data\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ManajemenRaportDashboardPage() {\n  _s();\n  // State\n  const [batchData, setBatchData] = useState([]);\n  const [loadingBatch, setLoadingBatch] = useState(true);\n  const [siswaList, setSiswaList] = useState([]);\n  const [loadingSiswa, setLoadingSiswa] = useState(true);\n  const [masterOptions, setMasterOptions] = useState([]);\n  const [periodeOptions, setPeriodeOptions] = useState([]);\n  const [tingkatanOptions, setTingkatanOptions] = useState([]);\n  const [kelasOptions, setKelasOptions] = useState([]);\n  const [selectedMaster, setSelectedMaster] = useState('');\n  const [selectedPeriode, setSelectedPeriode] = useState('');\n  const [selectedTingkatan, setSelectedTingkatan] = useState('');\n  const [selectedKelas, setSelectedKelas] = useState('');\n  const [editingNotes, setEditingNotes] = useState({});\n  const [deleting, setDeleting] = useState(null);\n  const {\n    toast\n  } = useToast();\n\n  // Fungsi fetchBatchData - Remove toast from dependencies\n  const fetchBatchData = useCallback(async () => {\n    setLoadingBatch(true);\n    try {\n      const res = await raportService.getRaportList();\n      setBatchData(res);\n    } catch (e) {\n      console.error(e);\n      toast({\n        title: 'Gagal Memuat Batch',\n        description: 'Terjadi kesalahan.',\n        variant: 'destructive'\n      });\n    } finally {\n      setLoadingBatch(false);\n    }\n  }, []); // Remove toast dependency\n\n  // Fungsi loadSiswa - Remove toast from dependencies and add proper conditions\n  const loadSiswa = useCallback(async () => {\n    if (!selectedPeriode || !selectedKelas) {\n      setSiswaList([]);\n      setLoadingSiswa(false); // Set loading to false when no selection\n      return;\n    }\n    setLoadingSiswa(true);\n    try {\n      const params = {\n        tahun_ajaran_id: selectedPeriode,\n        kelas_id: selectedKelas\n      };\n      const res = await axios.get(`${API_BASE}/siswa`, {\n        params\n      });\n      setSiswaList(res.data || []);\n      if ((res.data || []).length === 0) {\n        toast({\n          title: 'Informasi',\n          description: 'Tidak ada siswa yang ditemukan.'\n        });\n      }\n    } catch (e) {\n      console.error(e);\n      toast({\n        title: 'Gagal Memuat Siswa',\n        description: 'Gagal mengambil data siswa.',\n        variant: 'destructive'\n      });\n      setSiswaList([]);\n    } finally {\n      setLoadingSiswa(false);\n    }\n  }, [selectedPeriode, selectedKelas]); // Remove toast dependency\n\n  // Fixed initialization useEffect - only run once\n  useEffect(() => {\n    const initialize = async () => {\n      try {\n        setLoadingSiswa(true);\n        const masters = await tahunAjaranService.getAllMasterTahunAjaran();\n        const tingkatans = (await axios.get(`${API_BASE}/tingkatans`)).data;\n        setMasterOptions(masters);\n        setTingkatanOptions(tingkatans);\n        if (masters.length > 0) {\n          const defaultMasterId = masters[0].id;\n          setSelectedMaster(defaultMasterId);\n          const periodes = await tahunAjaranService.getPeriodesForMaster(defaultMasterId);\n          setPeriodeOptions(periodes);\n          if (periodes.length > 0) {\n            setSelectedPeriode(periodes[0].id);\n          }\n        }\n        if (tingkatans.length > 0) {\n          const defaultTingkatanId = tingkatans[0].id;\n          setSelectedTingkatan(defaultTingkatanId);\n          const kelasResp = await axios.get(`${API_BASE}/kelas`, {\n            params: {\n              tingkatan_id: defaultTingkatanId\n            }\n          });\n          setKelasOptions(kelasResp.data || []);\n          if (kelasResp.data && kelasResp.data.length > 0) {\n            setSelectedKelas(kelasResp.data[0].id);\n          }\n        }\n      } catch (error) {\n        console.error(\"Initialization failed:\", error);\n        toast({\n          title: 'Inisialisasi Gagal',\n          description: 'Gagal memuat data filter awal.',\n          variant: 'destructive'\n        });\n      } finally {\n        setLoadingSiswa(false);\n      }\n    };\n    initialize();\n    fetchBatchData();\n  }, []); // Empty dependency array - only runs once\n\n  // Handle master selection changes\n  useEffect(() => {\n    if (!selectedMaster) {\n      setPeriodeOptions([]);\n      setSelectedPeriode('');\n      return;\n    }\n    const fetchPeriodes = async () => {\n      try {\n        const periodes = await tahunAjaranService.getPeriodesForMaster(selectedMaster);\n        setPeriodeOptions(periodes);\n        setSelectedPeriode(periodes.length > 0 ? periodes[0].id : '');\n      } catch (error) {\n        console.error('Failed to fetch periodes:', error);\n        setPeriodeOptions([]);\n        setSelectedPeriode('');\n      }\n    };\n    fetchPeriodes();\n  }, [selectedMaster]);\n\n  // Handle tingkatan selection changes\n  useEffect(() => {\n    if (!selectedTingkatan) {\n      setKelasOptions([]);\n      setSelectedKelas('');\n      return;\n    }\n    const fetchKelas = async () => {\n      try {\n        const resp = await axios.get(`${API_BASE}/kelas`, {\n          params: {\n            tingkatan_id: selectedTingkatan\n          }\n        });\n        setKelasOptions(resp.data || []);\n        setSelectedKelas(resp.data && resp.data.length > 0 ? resp.data[0].id : '');\n      } catch (err) {\n        console.error('Failed fetching kelas for tingkatan', err);\n        setKelasOptions([]);\n        setSelectedKelas('');\n      }\n    };\n    fetchKelas();\n  }, [selectedTingkatan]);\n\n  // Load siswa when periode or kelas changes\n  useEffect(() => {\n    loadSiswa();\n  }, [selectedPeriode, selectedKelas]); // Direct dependencies instead of function\n\n  // Helper functions\n  const downloadBlob = (resp, defaultName) => {\n    const blob = new Blob([resp.data], {\n      type: resp.headers['content-type']\n    });\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    let fileName = defaultName;\n    const cd = resp.headers['content-disposition'];\n    if (cd) {\n      const m = cd.match(/filename=\"(.+)\"/);\n      if (m) fileName = m[1];\n    }\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n    window.URL.revokeObjectURL(link.href);\n  };\n  const handleGenerate = async (type, siswaId) => {\n    if ((type === 'nilai' || type === 'sikap') && !selectedPeriode) {\n      return toast({\n        title: 'Pilih Periode',\n        description: 'Pilih tahun ajaran dan semester dulu',\n        variant: 'destructive'\n      });\n    }\n    try {\n      var _periodeOptions$find;\n      let resp;\n      const semester = (_periodeOptions$find = periodeOptions.find(p => p.id === selectedPeriode)) === null || _periodeOptions$find === void 0 ? void 0 : _periodeOptions$find.semester;\n      if (type === 'identitas') resp = await raportService.generateIdentitas(siswaId);\n      if (type === 'nilai') resp = await raportService.generateNilai(siswaId, selectedPeriode, semester);\n      if (type === 'sikap') resp = await raportService.generateSikap(siswaId, selectedPeriode, semester);\n      if (resp) {\n        downloadBlob(resp, `Laporan_${type}_${siswaId}.docx`);\n        toast({\n          title: 'Sukses',\n          description: 'File laporan berhasil diunduh.'\n        });\n      }\n    } catch (e) {\n      var _e$response, _e$response$data;\n      console.error(e);\n      toast({\n        title: 'Gagal Generate',\n        description: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Gagal membuat file laporan.',\n        variant: 'destructive'\n      });\n    }\n  };\n  const handleSaveNotes = async siswa => {\n    var _siswa$currentHistory;\n    const notes = editingNotes[siswa.id];\n    if (!notes || !notes.catatan_akademik && !notes.catatan_sikap) return;\n    const histId = (_siswa$currentHistory = siswa.currentHistory) === null || _siswa$currentHistory === void 0 ? void 0 : _siswa$currentHistory.id;\n    if (!histId) {\n      return toast({\n        title: 'History Tidak Ditemukan',\n        description: 'Tidak ada riwayat kelas untuk siswa ini.',\n        variant: 'destructive'\n      });\n    }\n    try {\n      await axios.put(`${API_BASE}/history/${histId}/catatan`, notes);\n      toast({\n        title: 'Berhasil',\n        description: 'Catatan berhasil disimpan.'\n      });\n      // Clear editing notes after successful save\n      setEditingNotes(prev => {\n        const newNotes = {\n          ...prev\n        };\n        delete newNotes[siswa.id];\n        return newNotes;\n      });\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      console.error(e);\n      toast({\n        title: 'Gagal Menyimpan',\n        description: (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Gagal menyimpan catatan.',\n        variant: 'destructive'\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold\",\n          children: \"Manajemen Raport\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted-foreground\",\n          children: \"Pilih filter untuk menampilkan siswa, lalu kelola raport dan catatan per individu.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Filter Siswa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: \"Ubah pilihan di bawah ini untuk memuat daftar siswa secara otomatis.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"master-ajaran\",\n                children: \"Tahun Ajaran (Master)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedMaster),\n                onValueChange: value => setSelectedMaster(value ? Number(value) : ''),\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Tahun Ajaran\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: masterOptions.map(m => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(m.id),\n                    children: m.nama_ajaran\n                  }, m.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"periode\",\n                children: \"Semester / Periode\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedPeriode),\n                onValueChange: value => setSelectedPeriode(value ? Number(value) : ''),\n                disabled: !selectedMaster,\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Semester\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: periodeOptions.map(p => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(p.id),\n                    children: `Semester ${p.semester}`\n                  }, p.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"tingkatan\",\n                children: \"Tingkatan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedTingkatan),\n                onValueChange: value => setSelectedTingkatan(value ? Number(value) : ''),\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Tingkatan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: tingkatanOptions.map(t => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(t.id),\n                    children: t.nama_tingkatan\n                  }, t.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"kelas\",\n                children: \"Kelas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: String(selectedKelas),\n                onValueChange: value => setSelectedKelas(value ? Number(value) : ''),\n                disabled: !selectedTingkatan,\n                children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                    placeholder: \"Pilih Kelas\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                  children: kelasOptions.map(k => /*#__PURE__*/_jsxDEV(SelectItem, {\n                    value: String(k.id),\n                    children: k.nama_kelas\n                  }, k.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Daftar Siswa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: [\"Ditemukan \", siswaList.length, \" siswa. Generate laporan atau perbarui catatan di bawah.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: loadingSiswa ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-muted-foreground\",\n            children: \"Memuat data siswa...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this) : siswaList.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-muted-foreground\",\n            children: \"Belum ada siswa yang dimuat. Silakan sesuaikan filter di atas.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"border-b\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-3 font-medium\",\n                    children: \"Siswa\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-3 font-medium\",\n                    children: \"Catatan & Aksi\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: siswaList.map(s => {\n                  var _ref, _editingNotes$s$id$ca, _editingNotes$s$id, _s$currentHistory, _ref2, _editingNotes$s$id$ca2, _editingNotes$s$id2, _s$currentHistory2;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"border-b\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-3 align-top\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold\",\n                        children: s.nama\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 355,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs text-muted-foreground\",\n                        children: [\"NIS: \", s.nis]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 356,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"grid grid-cols-1 lg:grid-cols-2 gap-4\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"space-y-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            children: [/*#__PURE__*/_jsxDEV(Label, {\n                              className: \"text-xs font-semibold\",\n                              children: \"Catatan Akademik\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 362,\n                              columnNumber: 33\n                            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                              className: \"mt-1 w-full border rounded-md p-2 text-sm\",\n                              rows: 3,\n                              value: (_ref = (_editingNotes$s$id$ca = (_editingNotes$s$id = editingNotes[s.id]) === null || _editingNotes$s$id === void 0 ? void 0 : _editingNotes$s$id.catatan_akademik) !== null && _editingNotes$s$id$ca !== void 0 ? _editingNotes$s$id$ca : (_s$currentHistory = s.currentHistory) === null || _s$currentHistory === void 0 ? void 0 : _s$currentHistory.catatan_akademik) !== null && _ref !== void 0 ? _ref : '',\n                              onChange: e => setEditingNotes(prev => ({\n                                ...prev,\n                                [s.id]: {\n                                  ...(prev[s.id] || {}),\n                                  catatan_akademik: e.target.value\n                                }\n                              }))\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 363,\n                              columnNumber: 33\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 361,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            children: [/*#__PURE__*/_jsxDEV(Label, {\n                              className: \"text-xs font-semibold\",\n                              children: \"Catatan Sikap\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 377,\n                              columnNumber: 33\n                            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                              className: \"mt-1 w-full border rounded-md p-2 text-sm\",\n                              rows: 3,\n                              value: (_ref2 = (_editingNotes$s$id$ca2 = (_editingNotes$s$id2 = editingNotes[s.id]) === null || _editingNotes$s$id2 === void 0 ? void 0 : _editingNotes$s$id2.catatan_sikap) !== null && _editingNotes$s$id$ca2 !== void 0 ? _editingNotes$s$id$ca2 : (_s$currentHistory2 = s.currentHistory) === null || _s$currentHistory2 === void 0 ? void 0 : _s$currentHistory2.catatan_sikap) !== null && _ref2 !== void 0 ? _ref2 : '',\n                              onChange: e => setEditingNotes(prev => ({\n                                ...prev,\n                                [s.id]: {\n                                  ...(prev[s.id] || {}),\n                                  catatan_sikap: e.target.value\n                                }\n                              }))\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 378,\n                              columnNumber: 33\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 376,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 360,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex flex-col space-y-2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"text-xs font-semibold mb-1\",\n                            children: \"Generate Laporan\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 393,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex flex-wrap gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(Button, {\n                              size: \"sm\",\n                              variant: \"outline\",\n                              onClick: () => handleGenerate('identitas', s.id),\n                              children: \"Identitas\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 395,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(Button, {\n                              size: \"sm\",\n                              variant: \"outline\",\n                              onClick: () => handleGenerate('nilai', s.id),\n                              children: \"Nilai\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 396,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(Button, {\n                              size: \"sm\",\n                              variant: \"outline\",\n                              onClick: () => handleGenerate('sikap', s.id),\n                              children: \"Sikap\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 397,\n                              columnNumber: 35\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 394,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"pt-4\",\n                            children: /*#__PURE__*/_jsxDEV(Button, {\n                              size: \"sm\",\n                              onClick: () => handleSaveNotes(s),\n                              children: \"Simpan Catatan\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 400,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 399,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 392,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 359,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 358,\n                      columnNumber: 25\n                    }, this)]\n                  }, s.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Riwayat Batch Raport\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: \"Daftar batch raport yang pernah dibuat sebelumnya.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: loadingBatch ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Memuat...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(DataTable, {\n            columns: [{\n              header: 'Nama',\n              accessorKey: 'nama'\n            }, {\n              header: 'Keterangan',\n              accessorKey: 'keterangan'\n            }, {\n              id: 'actions',\n              header: 'Aksi',\n              accessorKey: 'id'\n            }],\n            data: batchData,\n            onDelete: r => setDeleting(r)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 5\n  }, this);\n}\n_s(ManajemenRaportDashboardPage, \"J0LyBjqP7Oe+lSz64H/rpTH0lYo=\", false, function () {\n  return [useToast];\n});\n_c = ManajemenRaportDashboardPage;\nvar _c;\n$RefreshReg$(_c, \"ManajemenRaportDashboardPage\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","DashboardLayout","axios","raportService","Card","CardContent","CardHeader","CardTitle","CardDescription","Button","useToast","tahunAjaranService","Label","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","API_BASE","DataTable","jsxDEV","_jsxDEV","ManajemenRaportDashboardPage","_s","batchData","setBatchData","loadingBatch","setLoadingBatch","siswaList","setSiswaList","loadingSiswa","setLoadingSiswa","masterOptions","setMasterOptions","periodeOptions","setPeriodeOptions","tingkatanOptions","setTingkatanOptions","kelasOptions","setKelasOptions","selectedMaster","setSelectedMaster","selectedPeriode","setSelectedPeriode","selectedTingkatan","setSelectedTingkatan","selectedKelas","setSelectedKelas","editingNotes","setEditingNotes","deleting","setDeleting","toast","fetchBatchData","res","getRaportList","e","console","error","title","description","variant","loadSiswa","params","tahun_ajaran_id","kelas_id","get","data","length","initialize","masters","getAllMasterTahunAjaran","tingkatans","defaultMasterId","id","periodes","getPeriodesForMaster","defaultTingkatanId","kelasResp","tingkatan_id","fetchPeriodes","fetchKelas","resp","err","downloadBlob","defaultName","blob","Blob","type","headers","link","document","createElement","href","window","URL","createObjectURL","fileName","cd","m","match","download","body","appendChild","click","remove","revokeObjectURL","handleGenerate","siswaId","_periodeOptions$find","semester","find","p","generateIdentitas","generateNilai","generateSikap","_e$response","_e$response$data","response","message","handleSaveNotes","siswa","_siswa$currentHistory","notes","catatan_akademik","catatan_sikap","histId","currentHistory","put","prev","newNotes","_e$response2","_e$response2$data","children","className","_jsxFileName","lineNumber","columnNumber","htmlFor","value","String","onValueChange","Number","placeholder","map","nama_ajaran","disabled","t","nama_tingkatan","k","nama_kelas","s","_ref","_editingNotes$s$id$ca","_editingNotes$s$id","_s$currentHistory","_ref2","_editingNotes$s$id$ca2","_editingNotes$s$id2","_s$currentHistory2","nama","nis","rows","onChange","target","size","onClick","columns","header","accessorKey","onDelete","r","_c","$RefreshReg$"],"sources":["C:/laragon/www/E-RAPORT-NUURUSH-SHOLAAH/e-raport-client/src/dashboard/manajemen-raport/page.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport DashboardLayout from '../../dashboard/layout';\r\nimport axios from 'axios';\r\nimport raportService from '../../services/raportService';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../../components/ui/card';\r\nimport { Button } from '../../components/ui/button';\r\nimport { useToast } from '../../components/ui/toast';\r\nimport tahunAjaranService from '../../services/tahunAjaranService';\r\nimport { Label } from '../../components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../components/ui/select';\r\nimport API_BASE from '../../api';\r\nimport DataTable from '../../components/data-table';\r\n\r\n// Tipe data\r\ntype SiswaRow = {\r\n  id: number;\r\n  nis: string;\r\n  nama: string;\r\n  currentHistory?: {\r\n    id: number;\r\n    kelas_id: number;\r\n    catatan_akademik?: string;\r\n    catatan_sikap?: string;\r\n  };\r\n};\r\ntype BatchRow = { id: number; nama: string; keterangan?: string };\r\n\r\nexport default function ManajemenRaportDashboardPage() {\r\n  // State\r\n  const [batchData, setBatchData] = useState<BatchRow[]>([]);\r\n  const [loadingBatch, setLoadingBatch] = useState(true);\r\n  const [siswaList, setSiswaList] = useState<SiswaRow[]>([]);\r\n  const [loadingSiswa, setLoadingSiswa] = useState(true);\r\n  const [masterOptions, setMasterOptions] = useState<any[]>([]);\r\n  const [periodeOptions, setPeriodeOptions] = useState<any[]>([]);\r\n  const [tingkatanOptions, setTingkatanOptions] = useState<any[]>([]);\r\n  const [kelasOptions, setKelasOptions] = useState<any[]>([]);\r\n  const [selectedMaster, setSelectedMaster] = useState<number | ''>('');\r\n  const [selectedPeriode, setSelectedPeriode] = useState<number | ''>('');\r\n  const [selectedTingkatan, setSelectedTingkatan] = useState<number | ''>('');\r\n  const [selectedKelas, setSelectedKelas] = useState<number | ''>('');\r\n  const [editingNotes, setEditingNotes] = useState<Record<number, { catatan_akademik?: string; catatan_sikap?: string }>>({});\r\n  const [deleting, setDeleting] = useState<BatchRow | null>(null);\r\n  const { toast } = useToast();\r\n\r\n  // Fungsi fetchBatchData - Remove toast from dependencies\r\n  const fetchBatchData = useCallback(async () => {\r\n    setLoadingBatch(true);\r\n    try {\r\n      const res = await raportService.getRaportList();\r\n      setBatchData(res);\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Memuat Batch', description: 'Terjadi kesalahan.', variant: 'destructive' });\r\n    } finally {\r\n      setLoadingBatch(false);\r\n    }\r\n  }, []); // Remove toast dependency\r\n\r\n  // Fungsi loadSiswa - Remove toast from dependencies and add proper conditions\r\n  const loadSiswa = useCallback(async () => {\r\n    if (!selectedPeriode || !selectedKelas) {\r\n      setSiswaList([]);\r\n      setLoadingSiswa(false); // Set loading to false when no selection\r\n      return;\r\n    }\r\n    \r\n    setLoadingSiswa(true);\r\n    try {\r\n      const params = { tahun_ajaran_id: selectedPeriode, kelas_id: selectedKelas };\r\n      const res = await axios.get<SiswaRow[]>(`${API_BASE}/siswa`, { params });\r\n      setSiswaList(res.data || []);\r\n      if ((res.data || []).length === 0) {\r\n        toast({ title: 'Informasi', description: 'Tidak ada siswa yang ditemukan.' });\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Memuat Siswa', description: 'Gagal mengambil data siswa.', variant: 'destructive' });\r\n      setSiswaList([]);\r\n    } finally {\r\n      setLoadingSiswa(false);\r\n    }\r\n  }, [selectedPeriode, selectedKelas]); // Remove toast dependency\r\n\r\n  // Fixed initialization useEffect - only run once\r\n  useEffect(() => {\r\n    const initialize = async () => {\r\n      try {\r\n        setLoadingSiswa(true);\r\n        const masters = await tahunAjaranService.getAllMasterTahunAjaran();\r\n        const tingkatans = (await axios.get(`${API_BASE}/tingkatans`)).data;\r\n        setMasterOptions(masters);\r\n        setTingkatanOptions(tingkatans);\r\n        \r\n        if (masters.length > 0) {\r\n          const defaultMasterId = masters[0].id;\r\n          setSelectedMaster(defaultMasterId);\r\n          const periodes = await tahunAjaranService.getPeriodesForMaster(defaultMasterId);\r\n          setPeriodeOptions(periodes);\r\n          if (periodes.length > 0) {\r\n            setSelectedPeriode(periodes[0].id);\r\n          }\r\n        }\r\n        if (tingkatans.length > 0) {\r\n          const defaultTingkatanId = tingkatans[0].id;\r\n          setSelectedTingkatan(defaultTingkatanId);\r\n          const kelasResp = await axios.get(`${API_BASE}/kelas`, { params: { tingkatan_id: defaultTingkatanId } });\r\n          setKelasOptions(kelasResp.data || []);\r\n          if (kelasResp.data && kelasResp.data.length > 0) {\r\n            setSelectedKelas(kelasResp.data[0].id);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Initialization failed:\", error);\r\n        toast({ title: 'Inisialisasi Gagal', description: 'Gagal memuat data filter awal.', variant: 'destructive' });\r\n      } finally {\r\n        setLoadingSiswa(false);\r\n      }\r\n    };\r\n    \r\n    initialize();\r\n    fetchBatchData();\r\n  }, []); // Empty dependency array - only runs once\r\n\r\n  // Handle master selection changes\r\n  useEffect(() => {\r\n    if (!selectedMaster) {\r\n      setPeriodeOptions([]);\r\n      setSelectedPeriode('');\r\n      return;\r\n    }\r\n    \r\n    const fetchPeriodes = async () => {\r\n      try {\r\n        const periodes = await tahunAjaranService.getPeriodesForMaster(selectedMaster);\r\n        setPeriodeOptions(periodes);\r\n        setSelectedPeriode(periodes.length > 0 ? periodes[0].id : '');\r\n      } catch (error) {\r\n        console.error('Failed to fetch periodes:', error);\r\n        setPeriodeOptions([]);\r\n        setSelectedPeriode('');\r\n      }\r\n    };\r\n    \r\n    fetchPeriodes();\r\n  }, [selectedMaster]);\r\n\r\n  // Handle tingkatan selection changes\r\n  useEffect(() => {\r\n    if (!selectedTingkatan) {\r\n      setKelasOptions([]);\r\n      setSelectedKelas('');\r\n      return;\r\n    }\r\n    \r\n    const fetchKelas = async () => {\r\n      try {\r\n        const resp = await axios.get(`${API_BASE}/kelas`, { params: { tingkatan_id: selectedTingkatan } });\r\n        setKelasOptions(resp.data || []);\r\n        setSelectedKelas(resp.data && resp.data.length > 0 ? resp.data[0].id : '');\r\n      } catch (err) {\r\n        console.error('Failed fetching kelas for tingkatan', err);\r\n        setKelasOptions([]);\r\n        setSelectedKelas('');\r\n      }\r\n    };\r\n    \r\n    fetchKelas();\r\n  }, [selectedTingkatan]);\r\n\r\n  // Load siswa when periode or kelas changes\r\n  useEffect(() => {\r\n    loadSiswa();\r\n  }, [selectedPeriode, selectedKelas]); // Direct dependencies instead of function\r\n\r\n  // Helper functions\r\n  const downloadBlob = (resp: any, defaultName: string) => {\r\n    const blob = new Blob([resp.data], { type: resp.headers['content-type'] });\r\n    const link = document.createElement('a');\r\n    link.href = window.URL.createObjectURL(blob);\r\n    let fileName = defaultName;\r\n    const cd = resp.headers['content-disposition'];\r\n    if (cd) {\r\n      const m = cd.match(/filename=\"(.+)\"/);\r\n      if (m) fileName = m[1];\r\n    }\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    link.remove();\r\n    window.URL.revokeObjectURL(link.href);\r\n  };\r\n\r\n  const handleGenerate = async (type: 'identitas' | 'nilai' | 'sikap', siswaId: number) => {\r\n    if ((type === 'nilai' || type === 'sikap') && !selectedPeriode) {\r\n      return toast({ title: 'Pilih Periode', description: 'Pilih tahun ajaran dan semester dulu', variant: 'destructive' });\r\n    }\r\n    try {\r\n      let resp;\r\n      const semester = periodeOptions.find(p => p.id === selectedPeriode)?.semester;\r\n      if (type === 'identitas') resp = await raportService.generateIdentitas(siswaId);\r\n      if (type === 'nilai') resp = await raportService.generateNilai(siswaId, selectedPeriode, semester);\r\n      if (type === 'sikap') resp = await raportService.generateSikap(siswaId, selectedPeriode, semester);\r\n      \r\n      if (resp) {\r\n        downloadBlob(resp, `Laporan_${type}_${siswaId}.docx`);\r\n        toast({ title: 'Sukses', description: 'File laporan berhasil diunduh.' });\r\n      }\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Generate', description: e?.response?.data?.message || 'Gagal membuat file laporan.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleSaveNotes = async (siswa: SiswaRow) => {\r\n    const notes = editingNotes[siswa.id];\r\n    if (!notes || (!notes.catatan_akademik && !notes.catatan_sikap)) return;\r\n    \r\n    const histId = siswa.currentHistory?.id;\r\n    if (!histId) {\r\n      return toast({ title: 'History Tidak Ditemukan', description: 'Tidak ada riwayat kelas untuk siswa ini.', variant: 'destructive' });\r\n    }\r\n    \r\n    try {\r\n      await axios.put(`${API_BASE}/history/${histId}/catatan`, notes);\r\n      toast({ title: 'Berhasil', description: 'Catatan berhasil disimpan.' });\r\n      // Clear editing notes after successful save\r\n      setEditingNotes(prev => {\r\n        const newNotes = { ...prev };\r\n        delete newNotes[siswa.id];\r\n        return newNotes;\r\n      });\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      toast({ title: 'Gagal Menyimpan', description: e?.response?.data?.message || 'Gagal menyimpan catatan.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">Manajemen Raport</h1>\r\n          <p className=\"text-muted-foreground\">Pilih filter untuk menampilkan siswa, lalu kelola raport dan catatan per individu.</p>\r\n        </div>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Filter Siswa</CardTitle>\r\n            <CardDescription>Ubah pilihan di bawah ini untuk memuat daftar siswa secara otomatis.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"master-ajaran\">Tahun Ajaran (Master)</Label>\r\n                <Select\r\n                  value={String(selectedMaster)}\r\n                  onValueChange={(value) => setSelectedMaster(value ? Number(value) : '')}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Tahun Ajaran\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {masterOptions.map(m => (\r\n                      <SelectItem key={m.id} value={String(m.id)}>\r\n                        {m.nama_ajaran}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"periode\">Semester / Periode</Label>\r\n                <Select\r\n                  value={String(selectedPeriode)}\r\n                  onValueChange={(value) => setSelectedPeriode(value ? Number(value) : '')}\r\n                  disabled={!selectedMaster}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Semester\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {periodeOptions.map(p => (\r\n                      <SelectItem key={p.id} value={String(p.id)}>\r\n                        {`Semester ${p.semester}`}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"tingkatan\">Tingkatan</Label>\r\n                <Select\r\n                  value={String(selectedTingkatan)}\r\n                  onValueChange={(value) => setSelectedTingkatan(value ? Number(value) : '')}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Tingkatan\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {tingkatanOptions.map(t => (\r\n                      <SelectItem key={t.id} value={String(t.id)}>\r\n                        {t.nama_tingkatan}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"kelas\">Kelas</Label>\r\n                <Select\r\n                  value={String(selectedKelas)}\r\n                  onValueChange={(value) => setSelectedKelas(value ? Number(value) : '')}\r\n                  disabled={!selectedTingkatan}\r\n                >\r\n                  <SelectTrigger className=\"mt-1\">\r\n                    <SelectValue placeholder=\"Pilih Kelas\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {kelasOptions.map(k => (\r\n                      <SelectItem key={k.id} value={String(k.id)}>\r\n                        {k.nama_kelas}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Daftar Siswa</CardTitle>\r\n            <CardDescription>Ditemukan {siswaList.length} siswa. Generate laporan atau perbarui catatan di bawah.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {loadingSiswa ? (\r\n              <div className=\"text-center text-muted-foreground\">Memuat data siswa...</div>\r\n            ) : siswaList.length === 0 ? (\r\n              <div className=\"text-center text-muted-foreground\">Belum ada siswa yang dimuat. Silakan sesuaikan filter di atas.</div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-sm\">\r\n                  <thead className=\"border-b\">\r\n                    <tr className=\"text-left\">\r\n                      <th className=\"p-3 font-medium\">Siswa</th>\r\n                      <th className=\"p-3 font-medium\">Catatan & Aksi</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {siswaList.map(s => (\r\n                      <tr key={s.id} className=\"border-b\">\r\n                        <td className=\"p-3 align-top\">\r\n                          <p className=\"font-semibold\">{s.nama}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">NIS: {s.nis}</p>\r\n                        </td>\r\n                        <td className=\"p-3\">\r\n                          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-3\">\r\n                              <div>\r\n                                <Label className=\"text-xs font-semibold\">Catatan Akademik</Label>\r\n                                <textarea \r\n                                  className=\"mt-1 w-full border rounded-md p-2 text-sm\" \r\n                                  rows={3} \r\n                                  value={editingNotes[s.id]?.catatan_akademik ?? s.currentHistory?.catatan_akademik ?? ''} \r\n                                  onChange={(e) => setEditingNotes(prev => ({ \r\n                                    ...prev, \r\n                                    [s.id]: { \r\n                                      ...(prev[s.id] || {}), \r\n                                      catatan_akademik: e.target.value \r\n                                    } \r\n                                  }))} \r\n                                />\r\n                              </div>\r\n                              <div>\r\n                                <Label className=\"text-xs font-semibold\">Catatan Sikap</Label>\r\n                                <textarea \r\n                                  className=\"mt-1 w-full border rounded-md p-2 text-sm\" \r\n                                  rows={3} \r\n                                  value={editingNotes[s.id]?.catatan_sikap ?? s.currentHistory?.catatan_sikap ?? ''} \r\n                                  onChange={(e) => setEditingNotes(prev => ({ \r\n                                    ...prev, \r\n                                    [s.id]: { \r\n                                      ...(prev[s.id] || {}), \r\n                                      catatan_sikap: e.target.value \r\n                                    } \r\n                                  }))} \r\n                                />\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex flex-col space-y-2\">\r\n                                <p className=\"text-xs font-semibold mb-1\">Generate Laporan</p>\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                  <Button size=\"sm\" variant=\"outline\" onClick={() => handleGenerate('identitas', s.id)}>Identitas</Button>\r\n                                  <Button size=\"sm\" variant=\"outline\" onClick={() => handleGenerate('nilai', s.id)}>Nilai</Button>\r\n                                  <Button size=\"sm\" variant=\"outline\" onClick={() => handleGenerate('sikap', s.id)}>Sikap</Button>\r\n                                </div>\r\n                                <div className=\"pt-4\">\r\n                                  <Button size=\"sm\" onClick={() => handleSaveNotes(s)}>Simpan Catatan</Button>\r\n                                </div>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Riwayat Batch Raport</CardTitle>\r\n            <CardDescription>Daftar batch raport yang pernah dibuat sebelumnya.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {loadingBatch ? (\r\n              <div>Memuat...</div>\r\n            ) : (\r\n              <DataTable<BatchRow>\r\n                columns={[\r\n                  { header: 'Nama', accessorKey: 'nama' },\r\n                  { header: 'Keterangan', accessorKey: 'keterangan' },\r\n                  { id: 'actions', header: 'Aksi', accessorKey: 'id' as any }\r\n                ]}\r\n                data={batchData}\r\n                onDelete={(r) => setDeleting(r)}\r\n              />\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}